<!DOCTYPE html>
<HTML lang="en">
<META charset="UTF-8">
<BODY>
<a href="https://github.com/k1729p/Study07/tree/main/docs"><img alt="" src="images/ColorScheme.png" height="25" width="800"/></a>
<H2 id="contents">Study07 README Contents</H2>
<H3 id="top">Research the <a href="https://spring.io/projects/spring-data-rest">Spring Data REST</a> application with the <a href="https://www.h2database.com/">H2 database</a></H3>

<P><img alt="" src="images/MermaidFlowchart.png" height="225" width="470"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The flowchart with the SpringBoot application and the H2 database.</I></P>

<p>
<a href="https://spring.io/projects/spring-data-rest">Spring Data REST</a>
</p>
<ul>
<li>takes the features of <a href="https://spring.io/projects/spring-hateoas">Spring HATEOAS</a> 
and <a href="https://spring.io/projects/spring-data-jpa">Spring Data JPA</a> 
and automatically combines them</li>
<li>directs <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html">Spring Web MVC</a> 
to create RESTful endpoints</li>
<li>creates the Spring Web MVC controllers</li>
</ul>

<p>
The controllers for the <a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Department.java">Department</a> 
and the <a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Employee.java">Employee</a>
are generated by Spring Data REST .<br>
The relevant MVC context hierarchy diagram is on page
<a href="https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-servlet/context-hierarchy.html">Spring Web MVC</a>.<br>
The generation process uses customizations from the
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java">DepartmentRepository</a> 
and the 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/EmployeeRepository.java">EmployeeRepository</a>.<br>
The helper controller <a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/controller/SampleDatasetLoaderController.java">
SampleDatasetLoaderController</a> is used only for loading the sample dataset.
</p>
<P>
The sections of this project:
</P>
<OL>
<LI><a href="#ONE"><b>SpringBoot Server</b></a></LI>
<LI><a href="#TWO"><b>Web Browser Client</b></a></LI>
<LI><a href="#THREE"><b>Curl Client</b></a></LI>
</OL>
<P>
Java source code. Packages:<br>
<img alt="" src="images/aquaHR-500.png"><br>
<img alt="" src="images/aquaSquare.png">
    <i>application sources</i>&nbsp;:&nbsp;
	<a href="https://github.com/k1729p/Study07/tree/main/src/main/java/kp">kp</a><br>
<img alt="" src="images/aquaSquare.png">
    <i>test sources</i>&nbsp;:&nbsp;
	<a href="https://github.com/k1729p/Study07/tree/main/src/test/java/kp">kp</a><br>
<img alt="" src="images/aquaHR-500.png">
</P>

<P><img alt="" src="images/MermaidClassDiagram.png" height="350" width="680"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The domain objects class diagram.</I></P>

<P>
<img alt="" src="images/yellowHR-500.png"><br>
<img alt="" src="images/yellowSquare.png">
    <a href="http://htmlpreview.github.io/?https://github.com/k1729p/Study07/blob/main/docs/apidocs/index.html">
	Java API Documentation</a>&nbsp;●&nbsp;
    <a href="http://htmlpreview.github.io/?https://github.com/k1729p/Study07/blob/main/docs/testapidocs/index.html">
	Java Test API Documentation</a><br>
<img alt="" src="images/yellowHR-500.png">
</P>
<hr>
<H3 id="ONE">❶ SpringBoot Server</H3>

<P>Action:<br>
<img alt="" src="images/orangeHR-500.png"><br>
<img alt="" src="images/orangeSquare.png"> 1. With batch file 
<a href="https://github.com/k1729p/Study07/blob/main/0_batch/01%20MVN%20clean%20install%20run.bat"> 
<I>"01 MVN clean install run.bat"</I></a> build and start the SpringBoot Server.<br>
<img alt="" src="images/orangeHR-500.png"></P>

<a href="#top">Back to the top of the page</a>
<hr>
<H3 id="TWO">❷ Web Browser Client</H3>

<P>Action:<br>
<img alt="" src="images/orangeHR-500.png"><br>
<img alt="" src="images/orangeSquare.png"> 1. With the URL <a href="http://localhost:8080">http://localhost:8080</a> 
open in the web browser the '<i>home page</i>'.<br>
<img alt="" src="images/orangeSquare.png"> 2. Loading standard dataset with 2 departments. On this '<i>home page</i>' select<br>
<img alt="" src="images/orangeSquare.png"><img alt="" src="images/spacer-32.png">'<i>Load sample dataset : 2 departments</i>' 
<a href="http://localhost:8080/loadSampleDataset">http://localhost:8080/loadSampleDataset</a>.<br>
<img alt="" src="images/orangeSquare.png"> 3. Two endpoints need to load a bigger dataset with 15 departments. On this '<i>home page</i>' select<br>
<img alt="" src="images/orangeSquare.png"><img alt="" src="images/spacer-32.png">'<i>Load sample dataset : 15 departments</i>' 
<a href="http://localhost:8080/loadSampleDataset?depIndex=15">http://localhost:8080/loadSampleDataset?depIndex=15</a>.<br>
<img alt="" src="images/orangeHR-500.png"></P>

<P><img alt="" src="images/greenCircle.png"> 
2.1. The '<i>home page</i>' file <b>index.html</b>: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/resources/static/index.html">HTML code</a>, 
<a href="http://htmlpreview.github.io/?https://github.com/k1729p/Study07/blob/main/src/main/resources/static/index.html">
HTML preview</a>
</P>
<P>
<img alt="" src="images/ScreenshotHomePage.png" height="970" width="905"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The screenshot of the home page.</I>
</P>

<P><img alt="" src="images/greenCircle.png"> 
2.2. The endpoints generated for 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Department.java">Department</a>
and selected from the default set.
</P>

<P>2.2.1. Get all <b>departments</b>: 
<a href="http://localhost:8080/departments">/departments</a>
</P>
<P><img alt="" src="images/GetAllDepartments.png" height="865" width="555"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get all <b>departments</b>'.</I>
</P>

<P>2.2.2. Get all <b>departments</b> on 3rd page: 
<a href="http://localhost:8080/departments?page=2&size=3&sort=name,asc">/departments?page=2&size=3&sort=name,asc</a><br>
This endpoint requires loading a bigger dataset with 15 departments.
</P>
<P><img alt="" src="images/GetAllDepartmentsOn3rdPage.png" height="1295" width="585"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get all <b>departments</b> on 3rd page'.</I>
</P>

<P>2.2.3. Get the <b>department</b>:
<a href="http://localhost:8080/departments/1">/departments/1</a>
</P>
<P><img alt="" src="images/GetDepartment.png" height="245" width="475"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get the <b>department</b>'.</I>
</P>

<P>2.2.4. Get the <b>employees</b> of the department: 
<a href="http://localhost:8080/departments/1/employees">/departments/1/employees</a>
</P>
<P><img alt="" src="images/GetEmployeesOfDepartment.png" height="695" width="565"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get the <b>employees</b> of the department'.</I>
</P>

<P><img alt="" src="images/greenCircle.png"> 
2.3. The endpoints generated for 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Department.java">Department</a> and  based on the interface 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java">DepartmentRepository</a>.
<br>
The <a href="images/DepartmentsSearchLinks.png">
<b>screenshot</b></a> of the result from the <i>_links</i> endpoint <a href="http://localhost:8080/departments/search">/departments/search</a>
</P>

<P>2.3.1. Find all <b>departments</b> on 3rd slice:<br>
<a href="http://localhost:8080/departments/search/findAllByOrderByName?page=2&amp;size=3&amp;sort=name,asc">/departments/search/findAllByOrderByName?page=2&amp;size=3&amp;sort=name,asc</a><br>
This endpoint requires loading a bigger dataset with 15 departments.<br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java#L32">
kp.company.repository.DepartmentRepository::findAllByOrderByName</a>.
</P>
<P><img alt="" src="images/FindAllDepartmentsOn3rdSlice.png" height="890" width="790"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Find all <b>departments</b> on 3rd slice'.</I>
</P>

<P>2.3.2. Find <b>departments</b> by name: 
<a href="http://localhost:8080/departments/search/findByName?name=D-Name-01">/departments/search/findByName?name=D-Name-01</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java#L40">
kp.company.repository.DepartmentRepository::findByName</a>.
</P>
<P><img alt="" src="images/FindDepartmentsByName.png" height="425" width="625"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Find <b>departments</b> by name'.</I>
</P>

<P>2.3.3. Count <b>departments</b> by name: 
<a href="http://localhost:8080/departments/search/countByName?name=D-Name-01">/departments/search/countByName?name=D-Name-01</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java#L48">
kp.company.repository.DepartmentRepository::countByName</a>.
</P>
<P><img alt="" src="images/CountDepartmentsByName.png" height="25" width="25"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Count <b>departments</b> by name'.</I>
</P>

<P>2.3.4. Count <b>employees</b> in the department with id: 
<a href="http://localhost:8080/departments/search/countByCustomQuery?id=1">/departments/search/countByCustomQuery?id=1</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java#L60">
kp.company.repository.DepartmentRepository::countByCustomQuery</a>.<br>
This method has the annotation with SQL query, and it returns
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/DepartmentDto.java">DepartmentDto</a> object.
</P>
<P><img alt="" src="images/CountEmployeesInDepartmentWithId.png" height="80" width="240"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Count <b>employees</b> in the department with id'.</I>
</P>

<P>2.3.5. Delete <b>departments</b> by name: 
<a href="http://localhost:8080/departments/search/deleteByName?name=D-Name-01">/departments/search/deleteByName?name=D-Name-01</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/DepartmentRepository.java#L69">
kp.company.repository.DepartmentRepository::deleteByName</a>.
</P>
<P><img alt="" src="images/DeleteDepartmentsByName.png" height="25" width="25"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Delete <b>departments</b> by name'.</I>
</P>

<P><img alt="" src="images/greenCircle.png"> 
2.4. The endpoints generated for 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Employee.java">Employee</a>
and selected from the default set.
</P>

<P>2.4.1. Get all <b>employees</b>: 
<a href="http://localhost:8080/employees">/employees</a>
</P>
<P><img alt="" src="images/GetAllEmployees.png" height="1400" width="565"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get all <b>employees</b>'.</I>
</P>

<P>2.4.2. Get the <b>employee</b>: 
<a href="http://localhost:8080/employees/101">/employees/101</a>
</P>
<P><img alt="" src="images/GetEmployee.png" height="260" width="480"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get the <b>employee</b>'.</I>
</P>

<P>2.4.3. Get the <b>department</b> of the employee: 
<a href="http://localhost:8080/employees/101/department">/employees/101/department</a>
</P>
<P><img alt="" src="images/GetDepartmentOfEmployee.png" height="245" width="475"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Get the <b>department</b> of the employee'.</I>
</P>

<P><img alt="" src="images/greenCircle.png"> 
2.5. The endpoints generated for 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/domain/Employee.java">Employee</a> and  based on interface 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/EmployeeRepository.java">EmployeeRepository</a>
<br>
The <a href="images/EmployeesSearchLinks.png">
<b>screenshot</b></a> of the result from the <i>_links</i> endpoint <a href="http://localhost:8080/employees/search">/employees/search</a>
</P>

<P>2.5.1. Find <b>employees</b> by first name and last name:<br>
<a href="http://localhost:8080/employees/search/findByFirstNameAndLastNameOrderByLastName?firstName=EF-Name-101&amp;lastName=EL-Name-101">/employees/search/findByFirstNameAndLastNameOrderByLastName?firstName=EF-Name-101&amp;lastName=EL-Name-101</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/EmployeeRepository.java#L26">
kp.company.repository.EmployeeRepository::findByFirstNameAndLastNameOrderByLastName</a>.
</P>
<P><img alt="" src="images/FindEmployeesByFirstNameAndLastName.png" height="440" width="1030"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Find <b>employees</b> by first name and last name'.</I>
</P>

<P>2.5.2. Find <b>employees</b> by first name and last name using 'LIKE' pattern:<br>
<a href="http://localhost:8080/employees/search/findByFirstNameLikeAndLastNameLikeOrderByLastName?firstName=%2501&amp;lastName=%2501">/employees/search/findByFirstNameLikeAndLastNameLikeOrderByLastName?firstName=%01&amp;lastName=%01</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/EmployeeRepository.java#L37">
kp.company.repository.EmployeeRepository::findByFirstNameLikeAndLastNameLikeOrderByLastName</a>.
</P>
<P><img alt="" src="images/FindEmployeesByFirstNameAndLastNameUsingLikePattern.png" height="695" width="1005"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Find <b>employees</b> by first name and last name using 'LIKE' pattern'.</I>
</P>

<P>2.5.3. Find <b>employees</b> by department name:<br>
<a href="http://localhost:8080/employees/search/findByDepartmentNameOrderByLastNameDesc?name=D-Name-01">/employees/search/findByDepartmentNameOrderByLastNameDesc?name=D-Name-01</a><br>
The method exposed on the repository: 
<a href="https://github.com/k1729p/Study07/blob/main/src/main/java/kp/company/repository/EmployeeRepository.java#L47">
kp.company.repository.EmployeeRepository::findByDepartmentNameOrderByLastNameDesc</a>.
</P>
<P><img alt="" src="images/FindEmployeesByDepartmentName.png" height="690" width="815"/><br>
<img alt="" src="images/blackArrowUp.png">
<I>The result from the endpoint 'Find <b>employees</b> by department name'.</I>
</P>

<P><img alt="" src="images/greenCircle.png"> 2.6. The Application-Level Profile Semantics (ALPS) links
</P>
<ul>
<li>The <a href="images/Profile.png">
<b>screenshot</b></a> of the result from the endpoint <a href="http://localhost:8080/profile">/profile</a></li>

<li>The <a href="images/ProfileDepartments.png">
<b>screenshot</b></a> of the result from the endpoint <a href="http://localhost:8080/profile/departments">/profile/departments</a></li>

<li>The <a href="images/ProfileEmployees.png">
<b>screenshot</b></a> of the result from the endpoint <a href="http://localhost:8080/profile/employees">/profile/employees</a></li>
</ul>

<P><img alt="" src="images/greenCircle.png">
2.7. The <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html">Spring Boot Actuator</a> 
creates the endpoints for monitoring and managing the application.<br>
The <a href="images/ScreenshotListOfActuatorEndpoints.png">
<b>screenshot</b></a> of "<i>List of actuator endpoints</i>" link.<br>
</P>

<a href="#top">Back to the top of the page</a>
<hr>
<H3 id="THREE">❸ Curl Client</H3>

<P>Action:<br>
<img alt="" src="images/orangeHR-500.png"><br>
<img alt="" src="images/orangeSquare.png"> 1. With batch file
 <a href="https://github.com/k1729p/Study07/blob/main/0_batch/02%20CURL%20CRUD.bat">
 <I>"02 CURL CRUD.bat"</I></a> create, read, update, and delete departments and employees.<br>
<img alt="" src="images/orangeSquare.png"> 2. With batch file
 <a href="https://github.com/k1729p/Study07/blob/main/0_batch/03%20CURL%20load%20and%20read.bat">
 <I>"03 CURL load and read.bat"</I></a> load the sample dataset and get departments and employees.<br>
 <img alt="" src="images/orangeHR-500.png"></P>

<P><img alt="" src="images/greenCircle.png">
3.1. The console log screenshots from the run of the batch file "02 CURL CRUD.bat".<br>
3.1.1. The <a href="images/ScreenshotCurlCrudCreate.png">
<b>screenshot</b></a> of "<i>CREATE</i>" and "<i>READ by id - after CREATE</i>" steps.<br>
3.1.2. The <a href="images/ScreenshotCurlCrudUpdateWithPut.png">
<b>screenshot</b></a> of "<i>UPDATE with PUT by id</i>" and "<i>READ by id - after UPDATE with PUT</i>" steps.<br>
The '<i>PUT</i>' replaces an entire record. Fields not supplied are replaced with null.<br>
3.1.3. The <a href="images/ScreenshotCurlCrudUpdateWithPatch.png">
<b>screenshot</b></a> of "<i>UPDATE with PATCH by id</i>" and "<i>READ by id - after UPDATE with PATCH</i>" steps.<br>
The '<i>PATCH</i>' updates a subset of items.<br>
3.1.4. The <a href="images/ScreenshotCurlCrudDelete.png">
<b>screenshot</b></a> of "<i>DELETE by id</i>" and "<i>READ by id - after DELETE</i>" steps.
</P>

<P><img alt="" src="images/greenCircle.png">
3.2. The console log screenshots from the run of the batch file "03 CURL load and read.bat".<br>
3.2.1. The <a href="images/ScreenshotCurlLoadSampleDataset.png">
<b>screenshot</b></a> of "<i>Load sample dataset</i>" step.<br>
3.2.2. The <a href="images/ScreenshotCurlGetOne.png">
<b>screenshot</b></a> of "<i>GET one department</i>" and "<i>GET one employee</i>" steps.<br>
3.2.3. The <a href="images/ScreenshotCurlGetAll.png">
<b>screenshot</b></a> of "<i>GET all departments</i>" and "<i>GET all employees</i>" step.<br>
</P>

<a href="#top">Back to the top of the page</a>
<hr>
<h3>Dictionary</h3>
<table style="border:solid">
<tbody>
<tr><td style="border:solid"><b>ALPS</b></td><td style="border:solid">Application-Level Profile Semantics</td></tr>
<tr><td style="border:solid"><b>HAL</b></td><td style="border:solid">Hypertext Application Language</td></tr>
<tr><td style="border:solid"><b>HATEOAS</b></td><td style="border:solid">Hypermedia As The Engine Of Application State</td></tr>
<tr><td style="border:solid"><b>REST</b></td><td style="border:solid">Representational State Transfer</td></tr>
</tbody>
</table>
<a href="#top">Back to the top of the page</a>
</BODY>
</HTML>